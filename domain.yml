version: "3.1"
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - start_discovery
  - ingredient_discovery

actions:
  - action_search_recipes
  - action_search_recipes_by_ingredients

# Slots used in flows
slots:
  recipe_category:
    type: categorical
    values: [entrada, principal, sobremesa]
    mappings: [{type: from_llm}]
  cook_time:
    type: text
    mappings: [{type: from_llm}]
  difficulty:
    type: categorical
    values: [facil, medio, dificil, qualquer]
    mappings: [{type: from_llm}]
  dietary_restrictions:
    type: categorical
    values: [nenhuma, vegetariano, vegano, sem_gluten, outro]
    mappings: [{type: from_llm}]
  avoid_ingredients:
    type: text
    mappings: [{type: from_llm}]
  caloric_preference:
    type: categorical
    values: [leve, moderado, sem_restricao]
    mappings: [{type: from_llm}]
  search_results:
    type: any
    influence_conversation: false
    mappings: [{type: controlled}]
  available_ingredients:
    type: text
    mappings:
      - type: from_llm

  has_more_ingredients:
    type: categorical
    values: [sim, nao]
    mappings:
      - type: from_llm

  additional_ingredients:
    type: text
    mappings:
      - type: from_llm

# Responses (utterances) used by the flow and other parts of the bot
responses:
  utter_greet:
    - text: "Ol√°! Sou o seu assistente de receitas. No que posso ajudar?"
  utter_goodbye:
    - text: "Adeus! Espero ter ajudado a encontrar algo delicioso."
  utter_ask_rephrase:
    - text: "Desculpe, n√£o entendi. Pode reformular o que procura?"

  utter_ask_recipe_category:
    - text: "√ìtimo! Vamos encontrar a receita perfeita para ti. Tens alguma prefer√™ncia de tipo de prato?"
      buttons:
        - payload: "Entrada"
          title: Entrada
        - payload: "Prato Principal"
          title: Prato Principal
        - payload: "Sobremesa"
          title: Sobremesa

  utter_ask_cook_time:
    - text: "Quanto tempo tens dispon√≠vel para cozinhar?"
      buttons:
        - payload: "At√© 30min"
          title: At√© 30min
        - payload: "30-60min"
          title: 30-60min
        - payload: "Mais de 1h"
          title: Mais de 1h

  utter_ask_difficulty:
    - text: "E que n√≠vel de dificuldade procuras?"
      buttons:
        - payload: "F√°cil"
          title: F√°cil
        - payload: "M√©dio"
          title: M√©dio
        - payload: "Dif√≠cil"
          title: Dif√≠cil
        - payload: "Qualquer"
          title: Qualquer

  utter_ask_dietary_restrictions:
    - text: "Tens alguma restri√ß√£o alimentar ou ingrediente que queiras evitar?"
      buttons:
        - payload: "Nenhuma"
          title: Nenhuma
        - payload: "Vegetariano"
          title: Vegetariano
        - payload: "Vegano"
          title: Vegano
        - payload: "Sem Gl√∫ten"
          title: Sem Gl√∫ten
        - payload: "Outro"
          title: Outro

  utter_ask_avoid_ingredients:
    - text: "Certo. Por favor, diz-me que ingredientes espec√≠ficos queres evitar (Ex: ovo, leite, amendoim)."

  utter_ask_caloric_preference:
    - text: "Queres uma op√ß√£o mais leve ou n√£o te importas com as calorias?"
      buttons:
        - payload: "Leve"
          title: Leve (at√© 300 cal)
        - payload: "Moderado"
          title: Moderado (300-600 cal)
        - payload: "Sem restri√ß√£o"
          title: Sem restri√ß√£o

  utter_results_summary:
    - text: "Encontrei {num_results} receitas perfeitas para ti! üç≥ {results_text} Qual te interessa?"

  utter_default_fallback:
    - text: "Desculpe, n√£o entendi o que procura. Pode reformular a sua pergunta?"

  utter_cannot_handle:
    - text: "Desculpe, n√£o estou treinado para isso. Pode reformular ou perguntar outra coisa sobre receitas?"
  
  utter_ask_available_ingredients:
    - text: "Que ingredientes tens neste momento em casa? Podes listar, por exemplo: frango, batata, cenoura."

  utter_ask_has_more_ingredients:
    - text: "Tens mais algum ingrediente que queiras usar?"
      buttons:
        - title: "Sim"
          payload: "Sim"
        - title: "N√£o, s√≥ esses"
          payload: "N√£o, s√≥ esses"

  utter_ask_additional_ingredients:
    - text: "Perfeito! Diz-me ent√£o que outros ingredientes tens (por exemplo: alho, azeite, lim√£o)."

  utter_ingredient_results:
    - text: "{results_text}"
