version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - quero_cozinhar
  - escolher_categoria
  - escolher_tempo
  - escolher_dificuldade
  - escolher_restricoes
  - informar_ingrediente_evitar
  - escolher_calorias
  - ver_receita
  - nova_busca
  - voltar
  - ajuda
  - bot_challenge
  - informar_ingredientes_disponiveis
  - quero_cozinhar_receita_especifica  
  - comecar
  - confirmar_ingredientes
  - mostrar_ingredientes_primeiro
  - proximo_passo
  - abandonar_receita
  - guardar_favoritos
  - regressar_passo
  - finalizar_receita
  - dar_avaliacao
  - nao_avaliar
  - favoritar_sim
  - favoritar_nao
  - remover_sim
  - remover_nao
  - listar_recentes
  - recentes_ver_todas
  - recentes_por_categoria
  - listar_favoritos
  - favoritos_por_categoria
  - favoritos_filtrar_categoria
  - recentes_filtrar_categoria

entities:
  - categoria
  - tempo
  - dificuldade
  - restricao
  - ingrediente
  - preferencia_calorica
  - numero_receita
  - ingrediente_possuido
  - avaliacao_utilizador
  - nome_receita 

  
slots:

  lista_ingredientes_possuido:
    type: list
    mappings:
      - type: from_entity
        entity: ingrediente_possuido
  categoria:
    type: categorical
    values:
      - entrada
      - prato_principal
      - sobremesa
    mappings:
      - type: from_entity
        entity: categoria
  
  tempo:
    type: categorical
    values:
      - ate_30min
      - 30_60min
      - mais_1h
      - tanto_faz
    mappings:
      - type: from_entity
        entity: tempo
  
  dificuldade:
    type: categorical
    values:
      - facil
      - medio
      - dificil
      - qualquer
    mappings:
      - type: from_entity
        entity: dificuldade
  
  restricao:
    type: text
    mappings:
      - type: from_entity
        entity: restricao
  
  ingrediente_evitar:
    type: text
    mappings:
      - type: from_entity
        entity: ingrediente
  
  preferencia_calorica:
    type: categorical
    values:
      - leve
      - moderado
      - reforÃ§ado 
      - hipercalorico 
      - sem_restricao

    mappings:
      - type: from_entity
        entity: preferencia_calorica
  
  receitas_encontradas:
    type: any
    influence_conversation: false
    mappings:
      - type: custom
  
  receita_selecionada:
    type: any
    influence_conversation: false
    mappings:
      - type: custom
  
  numero_receita:
    type: text
    mappings:
      - type: from_entity
        entity: numero_receita

  passo_atual:
    type: float
    initial_value: 0
    influence_conversation: false
    mappings:
      - type: custom

  modo_passo:
    type: bool
    initial_value: false
    influence_conversation: false
    mappings:
      - type: custom

  avaliacao_utilizador:
    type: float
    initial_value: null
    influence_conversation: false
    mappings:
      - type: custom

  nome_receita:  
    type: text
    mappings:
      - type: from_entity
        entity: nome_receita

responses:
  utter_greet:
    - text: "OlÃ¡! Bem-vindo ao ChefBot! ğŸ‘¨â€ğŸ³"
    - text: "OlÃ¡! Pronto para cozinhar algo delicioso? ğŸ³"
  
  utter_goodbye:
    - text: "AtÃ© logo! Bom apetite! ğŸ˜‹"
    - text: "Tchau! ğŸ‘‹"
  
  utter_inicio_descoberta:
    - text: "Ã“timo! Vamos encontrar a receita perfeita para ti. Vou fazer algumas perguntas rÃ¡pidas."
  
  utter_perguntar_categoria:
    - text: "Que tipo de prato queres fazer?"
      buttons:
        - title: "ğŸ¥— Entrada"
          payload: '/escolher_categoria{{"categoria":"entrada"}}'
        - title: "ğŸ Prato principal"
          payload: '/escolher_categoria{{"categoria":"prato_principal"}}'
        - title: "ğŸ° Sobremesa"
          payload: '/escolher_categoria{{"categoria":"sobremesa"}}'

  utter_perguntar_tempo:
    - text: "Quanto tempo tens disponÃ­vel?"
      buttons:
        - title: "âš¡ AtÃ© 30min"
          payload: '/escolher_tempo{{"tempo":"ate_30min"}}'
        - title: "â° 30-60min"
          payload: '/escolher_tempo{{"tempo":"30_60min"}}'
        - title: "ğŸ• Mais de 1h"
          payload: '/escolher_tempo{{"tempo":"mais_1h"}}'
        - title: "ğŸ¤· Tanto faz"
          payload: '/escolher_tempo{{"tempo":"tanto_faz"}}'
  
  utter_perguntar_dificuldade:
    - text: "Qual o nÃ­vel de dificuldade que procuras?"
      buttons:
        - title: "ğŸ˜Š FÃ¡cil"
          payload: '/escolher_dificuldade{{"dificuldade":"facil"}}'
        - title: "ğŸ¤” MÃ©dio"
          payload: '/escolher_dificuldade{{"dificuldade":"medio"}}'
        - title: "ğŸ˜¤ DifÃ­cil"
          payload: '/escolher_dificuldade{{"dificuldade":"dificil"}}'
        - title: "ğŸ¯ Qualquer"
          payload: '/escolher_dificuldade{{"dificuldade":"qualquer"}}'
  
  utter_perguntar_restricoes:
    - text: "Tens alguma restriÃ§Ã£o alimentar ou ingrediente que queiras evitar?"
      buttons:
        - title: "ğŸ¥¬ Vegetariano"
          payload: '/escolher_restricoes{{"restricao":"vegetariano"}}'
        - title: "ğŸŒ± Vegano"
          payload: '/escolher_restricoes{{"restricao":"vegano"}}'
        - title: "ğŸŒ¾ Sem glÃºten"
          payload: '/escolher_restricoes{{"restricao":"sem_gluten"}}'
        - title: "ğŸ¥› Sem lactose"
          payload: '/escolher_restricoes{{"restricao":"sem_lactose"}}'
        - title: "ğŸš« Sem aÃ§Ãºcar"
          payload: '/escolher_restricoes{{"restricao":"sem_acucar"}}'
        - title: "ğŸ¥š Sem ovo"
          payload: '/escolher_restricoes{{"restricao":"sem_ovo"}}'
        - title: "âœ… Nenhuma"
          payload: '/escolher_restricoes{{"restricao":"nenhuma"}}'


  utter_perguntar_ingrediente_especifico:
    - text: "Diz-me que ingrediente queres evitar (por exemplo: ovo, leite, cebola)"
  


  utter_perguntar_calorias:
    - text: "Queres uma opÃ§Ã£o mais leve ou nÃ£o te importas com as calorias?"
      buttons:
        - title: "ğŸ¥— Leve (atÃ© 300 cal)"
          payload: '/escolher_calorias{{"preferencia_calorica":"leve"}}'
        - title: "ğŸ½ï¸ Moderado (300-600)"
          payload: '/escolher_calorias{{"preferencia_calorica":"moderado"}}'
        - title: "ğŸ” ReforÃ§ado (600-900)"      # <-- NOVO
          payload: '/escolher_calorias{{"preferencia_calorica":"reforÃ§ado"}}'
        - title: "ğŸ’ª HipercalÃ³rico (+900)"      # <-- NOVO
          payload: '/escolher_calorias{{"preferencia_calorica":"hipercalorico"}}'
        - title: "ğŸ• Sem restriÃ§Ã£o"
          payload: '/escolher_calorias{{"preferencia_calorica":"sem_restricao"}}'


  utter_procurando_receitas:
    - text: "A procurar as melhores receitas para ti... ğŸ”"
  
  utter_perguntar_qual_receita:
    - text: "Qual receita te interessa?"
  
  utter_nenhuma_receita_encontrada:
    - text: "Desculpa, nÃ£o encontrei receitas com esses critÃ©rios. Queres tentar com filtros diferentes?"
      buttons:
        - title: "ğŸ”„ Nova busca"
          payload: '/nova_busca'
        - title: "âŒ Sair"
          payload: '/goodbye'
  
  utter_ajuda:
    - text: "Posso ajudar-te a encontrar as melhores receitas! Basta dizeres 'Quero cozinhar algo' e vou guiar-te atravÃ©s de algumas perguntas para encontrar a receita perfeita. ğŸ˜Š"
  
  utter_iamabot:
    - text: "Sou um assistente virtual de receitas criado para te ajudar a cozinhar! ğŸ¤–ğŸ‘¨â€ğŸ³"
  
  utter_default:
    - text: "Desculpa, nÃ£o percebi. Podes reformular?"
    - text: "NÃ£o entendi bem. Podes dizer de outra forma?"
  utter_perguntar_ingredientes:
    - text: "Diz-me, que ingredientes tens aÃ­ em casa? (Ex: tenho batata, ovos e cebola)"

  utter_sem_receita_selecionada:
    - text: "Ups, nÃ£o tenho nenhuma receita selecionada. Escolhe uma receita primeiro na lista ğŸ™‚"

  utter_avaliacao_obrigado:
    - text: "Obrigado pela avaliaÃ§Ã£o! â­"

  utter_guardado_favoritos:
    - text: "Feito âœ… Guardei nos teus favoritos!"

  utter_ok_sem_favoritos:
    - text: "Perfeito ğŸ™‚"


actions:
  - action_buscar_receitas
  - action_mostrar_receitas
  - action_mostrar_receita_completa
  - action_reset_slots
  - action_buscar_por_ingredientes
  - action_iniciar_modo_passo
  - action_mostrar_ingredientes_da_receita
  - action_mostrar_passo_atual
  - action_proximo_passo
  - action_abandonar_receita
  - action_regressar_passo
  - action_perguntar_avaliacao
  - action_registar_recente_e_perguntar_favoritos
  - action_guardar_favoritos_csv
  - action_remover_favoritos_csv
  - action_mostrar_recentes_resumo
  - action_mostrar_recentes_todas
  - action_mostrar_recentes_por_categoria
  - action_mostrar_favoritos_lista
  - action_mostrar_favoritos_por_categoria
  - action_mostrar_favoritos_filtrados_por_categoria
  - action_mostrar_recentes_filtrados_por_categoria
  - action_buscar_por_nome 

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false